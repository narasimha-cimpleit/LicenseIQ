
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SYSTEM ARCHITECTURE</title>
    <style>
        @media print {
            body { margin: 0; }
            .no-print { display: none; }
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Arial', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            background-color: #ffffff;
        }
        
        h1 { 
            color: #2c3e50; 
            border-bottom: 3px solid #3498db; 
            padding-bottom: 15px; 
            margin-top: 0;
            font-size: 2.5em;
        }
        
        h2 { 
            color: #34495e; 
            border-bottom: 2px solid #ecf0f1; 
            padding-bottom: 10px; 
            margin-top: 40px;
            font-size: 1.8em;
        }
        
        h3 { 
            color: #7f8c8d; 
            margin-top: 30px;
            font-size: 1.4em;
        }
        
        h4 { 
            color: #95a5a6; 
            margin-top: 25px;
            font-size: 1.2em;
        }
        
        code { 
            background-color: #f8f9fa; 
            padding: 3px 6px; 
            border-radius: 4px; 
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.9em;
            border: 1px solid #e9ecef;
        }
        
        pre { 
            background-color: #f8f9fa; 
            padding: 20px; 
            border-radius: 8px; 
            overflow-x: auto;
            border: 1px solid #e9ecef;
            margin: 20px 0;
        }
        
        pre code {
            background: none;
            padding: 0;
            border: none;
        }
        
        blockquote { 
            border-left: 4px solid #3498db; 
            margin: 20px 0; 
            padding-left: 25px; 
            color: #7f8c8d;
            font-style: italic;
            background-color: #f8f9fa;
            padding: 15px 25px;
            border-radius: 0 8px 8px 0;
        }
        
        table { 
            border-collapse: collapse; 
            width: 100%; 
            margin: 25px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        th, td { 
            border: 1px solid #ddd; 
            padding: 12px 16px; 
            text-align: left; 
        }
        
        th { 
            background-color: #3498db; 
            color: white;
            font-weight: 600;
        }
        
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        ul { 
            margin: 15px 0; 
            padding-left: 25px;
        }
        
        li { 
            margin: 8px 0; 
        }
        
        a {
            color: #3498db;
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        p {
            margin: 15px 0;
            text-align: justify;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid #ecf0f1;
        }
        
        .footer {
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px solid #ecf0f1;
            text-align: center;
            color: #95a5a6;
            font-size: 0.9em;
        }
        
        .print-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            z-index: 1000;
        }
        
        .print-btn:hover {
            background: #2980b9;
        }
        
        @media print {
            .print-btn { display: none; }
            body { max-width: none; margin: 0; padding: 20px; }
        }
    </style>
</head>
<body>
    <button class="print-btn no-print" onclick="window.print()">📄 Print to PDF</button>
    <div class="header">
        <h1>SYSTEM ARCHITECTURE</h1>
        <p><em>Generated on 9/7/2025</em></p>
    </div>
    
    <div class="content">
        <h1>Licence IQ Research Platform - System Architecture</h1><h2>High-Level Architecture Overview</h2><p><pre><code><br>┌─────────────────────────────────────────────────────────────────┐<br>│                    LICENCE IQ RESEARCH PLATFORM                 │<br>├─────────────────────────────────────────────────────────────────┤<br>│                                                                 │<br>│  ┌──────────────┐    ┌─────────────┐    ┌────────────────┐     │<br>│  │   Frontend   │    │   Backend   │    │   AI Service   │     │<br>│  │   (React)    │◄──►│ (Express.js)│◄──►│   (Groq API)   │     │<br>│  │              │    │             │    │                │     │<br>│  └──────────────┘    └─────────────┘    └────────────────┘     │<br>│           │                   │                    │            │<br>│           │                   │                    │            │<br>│  ┌──────────────┐    ┌─────────────┐    ┌────────────────┐     │<br>│  │  UI Library  │    │  Database   │    │  File Storage  │     │<br>│  │ (shadcn/ui)  │    │(PostgreSQL) │    │   (Local FS)   │     │<br>│  └──────────────┘    └─────────────┘    └────────────────┘     │<br>│                                                                 │<br>└─────────────────────────────────────────────────────────────────┘<br></code></pre></p><h2>Detailed System Architecture</h2><h3>1. Frontend Architecture (Client Layer)</h3><br><pre><code><br>┌─────────────────────────────────────────────────────────────────┐<br>│                     FRONTEND ARCHITECTURE                       │<br>├─────────────────────────────────────────────────────────────────┤<br>│                                                                 │<br>│  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌─────────────┐│<br>│  │    Auth    │  │ Contracts  │  │ Analytics  │  │   Upload    ││<br>│  │   Pages    │  │   Pages    │  │   Pages    │  │    Page     ││<br>│  │            │  │            │  │            │  │             ││<br>│  └────────────┘  └────────────┘  └────────────┘  └─────────────┘│<br>│         │               │               │               │        │<br>│         └───────────────┼───────────────┼───────────────┘        │<br>│                         │               │                        │<br>│  ┌────────────────────────────────────────────────────────────┐ │<br>│  │                   SHARED COMPONENTS                       │ │<br>│  │                                                           │ │<br>│  │  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────────┐ │ │<br>│  │  │ Contract │ │   Main   │ │  User    │ │    Dialog    │ │ │<br>│  │  │  Cards   │ │  Layout  │ │ Sidebar  │ │ Components   │ │ │<br>│  │  └──────────┘ └──────────┘ └──────────┘ └──────────────┘ │ │<br>│  └────────────────────────────────────────────────────────────┘ │<br>│                         │                                        │<br>│  ┌────────────────────────────────────────────────────────────┐ │<br>│  │                    CORE SERVICES                          │ │<br>│  │                                                           │ │<br>│  │  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────────┐ │ │<br>│  │  │ TanStack │ │   Auth   │ │  Theme   │ │    Routing   │ │ │<br>│  │  │  Query   │ │ Context  │ │ Context  │ │   (Wouter)   │ │ │<br>│  │  └──────────┘ └──────────┘ └──────────┘ └──────────────┘ │ │<br>│  └────────────────────────────────────────────────────────────┘ │<br>│                         │                                        │<br>│  ┌────────────────────────────────────────────────────────────┐ │<br>│  │                  DESIGN SYSTEM                            │ │<br>│  │                                                           │ │<br>│  │  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────────┐ │ │<br>│  │  │Tailwind  │ │ shadcn/  │ │ Lucide   │ │  Dark/Light  │ │ │<br>│  │  │   CSS    │ │    ui    │ │  Icons   │ │    Themes    │ │ │<br>│  │  └──────────┘ └──────────┘ └──────────┘ └──────────────┘ │ │<br>│  └────────────────────────────────────────────────────────────┘ │<br>│                                                                 │<br>└─────────────────────────────────────────────────────────────────┘<br></code></pre></p><h3>2. Backend Architecture (Server Layer)</h3><br><pre><code><br>┌─────────────────────────────────────────────────────────────────┐<br>│                     BACKEND ARCHITECTURE                        │<br>├─────────────────────────────────────────────────────────────────┤<br>│                                                                 │<br>│  ┌────────────────────────────────────────────────────────────┐ │<br>│  │                      API ROUTES                            │ │<br>│  │                                                            │ │<br>│  │ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌─────────────────┐│ │<br>│  │ │   Auth   │ │Contracts │ │Analytics │ │  User Mgmt      ││ │<br>│  │ │  Routes  │ │  Routes  │ │  Routes  │ │    Routes       ││ │<br>│  │ └──────────┘ └──────────┘ └──────────┘ └─────────────────┘│ │<br>│  └────────────────────────────────────────────────────────────┘ │<br>│                         │                                        │<br>│  ┌────────────────────────────────────────────────────────────┐ │<br>│  │                    MIDDLEWARE                              │ │<br>│  │                                                            │ │<br>│  │ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌─────────────────┐│ │<br>│  │ │   Auth   │ │   CORS   │ │  Audit   │ │     Error       ││ │<br>│  │ │Middleware│ │Middleware│ │ Logging  │ │   Handling      ││ │<br>│  │ └──────────┘ └──────────┘ └──────────┘ └─────────────────┘│ │<br>│  └────────────────────────────────────────────────────────────┘ │<br>│                         │                                        │<br>│  ┌────────────────────────────────────────────────────────────┐ │<br>│  │                     SERVICES                               │ │<br>│  │                                                            │ │<br>│  │ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌─────────────────┐│ │<br>│  │ │   Groq   │ │   File   │ │   PDF    │ │     Audit       ││ │<br>│  │ │ Service  │ │ Service  │ │ Service  │ │    Service      ││ │<br>│  │ └──────────┘ └──────────┘ └──────────┘ └─────────────────┘│ │<br>│  └────────────────────────────────────────────────────────────┘ │<br>│                         │                                        │<br>│  ┌────────────────────────────────────────────────────────────┐ │<br>│  │                  DATA ACCESS LAYER                         │ │<br>│  │                                                            │ │<br>│  │ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌─────────────────┐│ │<br>│  │ │ Storage  │ │ Database │ │ Session  │ │   Connection    ││ │<br>│  │ │Interface │ │ Storage  │ │ Storage  │ │     Pool        ││ │<br>│  │ └──────────┘ └──────────┘ └──────────┘ └─────────────────┘│ │<br>│  └────────────────────────────────────────────────────────────┘ │<br>│                                                                 │<br>└─────────────────────────────────────────────────────────────────┘<br></code></pre></p><h3>3. Data Flow Architecture</h3><br><pre><code><br>┌─────────────────────────────────────────────────────────────────┐<br>│                       DATA FLOW DIAGRAM                         │<br>├─────────────────────────────────────────────────────────────────┤<br>│                                                                 │<br>│ ┌─────────┐    ┌─────────────┐    ┌─────────────────────────┐   │<br>│ │  User   │───►│   Upload    │───►│    File Processing      │   │<br>│ │Interface│    │  Component  │    │       Pipeline          │   │<br>│ └─────────┘    └─────────────┘    └─────────────────────────┘   │<br>│                       │                        │                │<br>│                       │                        ▼                │<br>│ ┌─────────────────────┼──────────┐  ┌─────────────────────────┐ │<br>│ │                     │          │  │    Text Extraction      │ │<br>│ │  ┌─────────────┐    │          │  │     (PDF/DOCX)          │ │<br>│ │  │   Session   │    │          │  └─────────────────────────┘ │<br>│ │  │ Management  │    │          │             │                │<br>│ │  └─────────────┘    │          │             ▼                │<br>│ │         │           │          │  ┌─────────────────────────┐ │<br>│ │  ┌─────────────┐    │          │  │    AI Analysis          │ │<br>│ │  │    Auth     │    │          │  │   (Groq LLaMA)         │ │<br>│ │  │ Validation  │    │          │  └─────────────────────────┘ │<br>│ │  └─────────────┘    │          │             │                │<br>│ │         │           │          │             ▼                │<br>│ │  ┌─────────────┐    │          │  ┌─────────────────────────┐ │<br>│ │  │    RBAC     │    │          │  │   Analysis Storage      │ │<br>│ │  │ Permission  │    │          │  │     (Database)          │ │<br>│ │  │   Check     │    │          │  └─────────────────────────┘ │<br>│ │  └─────────────┘    │          │             │                │<br>│ └─────────────────────┼──────────┘             │                │<br>│                       │                        │                │<br>│                       ▼                        ▼                │<br>│ ┌─────────────────────────────────────────────────────────────┐ │<br>│ │                   DATABASE LAYER                            │ │<br>│ │                                                             │ │<br>│ │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────────────┐│ │<br>│ │  │  Users  │  │Contract │  │Analysis │  │   Audit Logs    ││ │<br>│ │  │  Table  │  │  Table  │  │  Table  │  │     Table       ││ │<br>│ │  └─────────┘  └─────────┘  └─────────┘  └─────────────────┘│ │<br>│ └─────────────────────────────────────────────────────────────┘ │<br>│                                                                 │<br>└─────────────────────────────────────────────────────────────────┘<br></code></pre></p><h3>4. Security Architecture</h3><br><pre><code><br>┌─────────────────────────────────────────────────────────────────┐<br>│                     SECURITY ARCHITECTURE                       │<br>├─────────────────────────────────────────────────────────────────┤<br>│                                                                 │<br>│ ┌─────────────────────────────────────────────────────────────┐ │<br>│ │                   AUTHENTICATION LAYER                     │ │<br>│ │                                                             │ │<br>│ │  ┌─────────┐    ┌──────────────┐    ┌──────────────────┐   │ │<br>│ │  │  Login  │───►│   Session    │───►│     Cookie       │   │ │<br>│ │  │Validation│    │  Management  │    │   (HttpOnly)     │   │ │<br>│ │  └─────────┘    └──────────────┘    └──────────────────┘   │ │<br>│ └─────────────────────────────────────────────────────────────┘ │<br>│                                │                                 │<br>│ ┌─────────────────────────────────────────────────────────────┐ │<br>│ │                  AUTHORIZATION LAYER                       │ │<br>│ │                                                             │ │<br>│ │  ┌─────────────┐  ┌──────────────┐  ┌──────────────────┐   │ │<br>│ │  │    RBAC     │  │  Permission  │  │      Route       │   │ │<br>│ │  │   System    │  │   Matrix     │  │   Protection     │   │ │<br>│ │  │(5 Roles)    │  │              │  │                  │   │ │<br>│ │  └─────────────┘  └──────────────┘  └──────────────────┘   │ │<br>│ └─────────────────────────────────────────────────────────────┘ │<br>│                                │                                 │<br>│ ┌─────────────────────────────────────────────────────────────┐ │<br>│ │                    INPUT VALIDATION                         │ │<br>│ │                                                             │ │<br>│ │  ┌─────────────┐  ┌──────────────┐  ┌──────────────────┐   │ │<br>│ │  │    Zod      │  │     File     │  │     Request      │   │ │<br>│ │  │ Validation  │  │  Validation  │  │   Sanitization   │   │ │<br>│ │  │             │  │              │  │                  │   │ │<br>│ │  └─────────────┘  └──────────────┘  └──────────────────┘   │ │<br>│ └─────────────────────────────────────────────────────────────┘ │<br>│                                │                                 │<br>│ ┌─────────────────────────────────────────────────────────────┐ │<br>│ │                      DATA PROTECTION                        │ │<br>│ │                                                             │ │<br>│ │  ┌─────────────┐  ┌──────────────┐  ┌──────────────────┐   │ │<br>│ │  │ Encrypted   │  │  Parameterized │ │     Secure      │   │ │<br>│ │  │ Passwords   │  │    Queries     │ │   File Paths    │   │ │<br>│ │  │   (bcrypt)  │  │   (Drizzle)    │ │                 │   │ │<br>│ │  └─────────────┘  └──────────────┘  └──────────────────┘   │ │<br>│ └─────────────────────────────────────────────────────────────┘ │<br>│                                                                 │<br>└─────────────────────────────────────────────────────────────────┘<br></code></pre></p><h3>5. AI Processing Pipeline</h3><br><pre><code><br>┌─────────────────────────────────────────────────────────────────┐<br>│                   AI PROCESSING ARCHITECTURE                     │<br>├─────────────────────────────────────────────────────────────────┤<br>│                                                                 │<br>│  ┌─────────────┐    ┌─────────────────┐    ┌─────────────────┐  │<br>│  │   File      │───►│   Text          │───►│    Groq API     │  │<br>│  │  Upload     │    │ Extraction      │    │   (LLaMA 3.1)   │  │<br>│  │             │    │                 │    │                 │  │<br>│  └─────────────┘    └─────────────────┘    └─────────────────┘  │<br>│         │                     │                       │         │<br>│         │                     │                       │         │<br>│  ┌─────────────┐    ┌─────────────────┐    ┌─────────────────┐  │<br>│  │ Validation  │    │   Processing    │    │   Analysis      │  │<br>│  │ & Storage   │    │     Queue       │    │   Results       │  │<br>│  │             │    │                 │    │                 │  │<br>│  └─────────────┘    └─────────────────┘    └─────────────────┘  │<br>│         │                     │                       │         │<br>│         │                     │                       │         │<br>│  ┌─────────────┐    ┌─────────────────┐    ┌─────────────────┐  │<br>│  │  Database   │    │    Status       │    │   Frontend      │  │<br>│  │  Storage    │    │   Updates       │    │    Display      │  │<br>│  │             │    │                 │    │                 │  │<br>│  └─────────────┘    └─────────────────┘    └─────────────────┘  │<br>│                                                                 │<br>│                     Processing States Flow:                     │<br>│                                                                 │<br>│  ┌─────────┐   ┌──────────────┐   ┌──────────┐   ┌──────────┐  │<br>│  │Pending  │──►│  Processing  │──►│Analyzed  │   │ Failed   │  │<br>│  │         │   │              │   │          │   │          │  │<br>│  └─────────┘   └──────────────┘   └──────────┘   └──────────┘  │<br>│                        │                              ▲        │<br>│                        │                              │        │<br>│                        └──────────────────────────────┘        │<br>│                           (Error Handling)                     │<br>│                                                                 │<br>└─────────────────────────────────────────────────────────────────┘<br></code></pre></p><h2>Component Interaction Matrix</h2><h3>Frontend Components</h3><br><table><tr><td>Component</td><td>Dependencies</td><td>Purpose</td></tr></table><br><table><tr><td>-----------</td><td>-------------</td><td>---------</td></tr></table><br><table><tr><td>AuthPage</td><td>useAuth, Form components</td><td>User authentication</td></tr></table><br><table><tr><td>ContractAnalysis</td><td>TanStack Query, AI results</td><td>Display analysis results</td></tr></table><br><table><tr><td>ContractCard</td><td>Contract data, Status badges</td><td>Contract list item</td></tr></table><br><table><tr><td>Dashboard</td><td>Analytics API, Chart components</td><td>Overview metrics</td></tr></table><br><table><tr><td>Upload</td><td>File handling, Progress tracking</td><td>Document upload</td></tr></table></p><h3>Backend Services</h3><br><table><tr><td>Service</td><td>Dependencies</td><td>Purpose</td></tr></table><br><table><tr><td>---------</td><td>-------------</td><td>---------</td></tr></table><br><table><tr><td>GroqService</td><td>Groq API, HTTP client</td><td>AI analysis processing</td></tr></table><br><table><tr><td>FileService</td><td>Multer, File system</td><td>File upload handling</td></tr></table><br><table><tr><td>Storage</td><td>Drizzle ORM, PostgreSQL</td><td>Database operations</td></tr></table><br><table><tr><td>AuthService</td><td>Session, Password hashing</td><td>Authentication logic</td></tr></table></p><h3>Database Relationships</h3><br><table><tr><td>Table</td><td>Related To</td><td>Relationship Type</td></tr></table><br><table><tr><td>-------</td><td>-----------</td><td>------------------</td></tr></table><br><table><tr><td>users</td><td>contracts</td><td>One-to-many (uploadedBy)</td></tr></table><br><table><tr><td>contracts</td><td>contractAnalysis</td><td>One-to-one</td></tr></table><br><table><tr><td>users</td><td>auditLogs</td><td>One-to-many</td></tr></table><br><table><tr><td>contracts</td><td>auditLogs</td><td>One-to-many (via entityId)</td></tr></table></p><h2>Scalability Considerations</h2><h3>Horizontal Scaling Points</h3><br>1. <strong>API Server:</strong> Multiple Express.js instances behind load balancer<br>2. <strong>Database:</strong> PostgreSQL read replicas for query distribution<br>3. <strong>File Storage:</strong> Distributed object storage (S3, GCS)<br>4. <strong>AI Processing:</strong> Queue-based processing with worker nodes</p><h3>Performance Optimizations</h3><br>1. <strong>Database Indexing:</strong> Optimized queries with proper indexes<br>2. <strong>Connection Pooling:</strong> Efficient database connection management<br>3. <strong>Caching:</strong> Redis for session and frequently accessed data<br>4. <strong>CDN:</strong> Static asset delivery optimization<br>5. <strong>Compression:</strong> Gzip compression for API responses</p>
    </div>
    
    <div class="footer no-print">
        <p>Document generated from Markdown • <strong>Licence IQ Research Platform</strong></p>
    </div>
</body>
</html>